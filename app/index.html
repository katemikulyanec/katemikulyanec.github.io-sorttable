<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sortowanie tabeli</title>

    <link rel="stylesheet" href="css/app.min.css">
</head>

<body>
    <table class="sort-table">
        <thead class="sort-table__header">
            <tr>
                <th scope="col" class="sort-table__modul">Modu≈Ç</th>
                <th scope="col" class="sort-table__autor">Autor</th>
                <th scope="col" class="sort-table__duration">
                    <a href="#"><i class="fas fa-caret-down"></i> Czas trwania</a>
                </th>
            </tr>
        </thead>
        <tbody class="sort-table__body">
            <tr>
                <td>JavaScript</td>
                <td>Aleksandra</td>
                <td class="sort-table__time" data-value="Czas">10129</td>
            </tr>
            <tr>
                <td>PHP bez tajemnic</td>
                <td>Piotr</td>
                <td class="sort-table__time" data-value="Czas">19393</td>
            </tr>
            <tr>
                <td>Frameworki</td>
                <td>Agnieszka</td>
                <td class="sort-table__time" data-value="Czas">14002</td>
            </tr>
        </tbody>
    </table>
</body>

<script>
    function table_sort() {
        document.querySelectorAll('th.sort-table__duration').forEach(th_elem => {
            let asc = true
            const index = Array.from(th_elem.parentNode.children).indexOf(th_elem)
            th_elem.addEventListener('click', (e) => {
                const arr = Array.from(th_elem.closest("table").querySelectorAll('tbody tr'))
                arr.sort((a, b) => {
                    const a_val = a.children[index].innerText
                    const b_val = b.children[index].innerText
                    return (asc) ? a_val.localeCompare(b_val) : b_val.localeCompare(a_val)
                })
                arr.forEach(elem => {
                    th_elem.closest("table").querySelector("tbody").appendChild(elem)
                })
                asc = !asc
            })
        })
    }

    table_sort()

</script>

</html>
